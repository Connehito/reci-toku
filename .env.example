# レシートリワード - 環境変数テンプレート
# このファイルを .env にコピーして使用してください
# cp .env.example .env

# ========================================
# データベース設定
# ========================================
# 開発環境: mamari-mysql コンテナ（Docker Compose）
# 本番/ステージング: RDS（Secrets Managerで管理）

# Docker Compose環境では、コンテナ間通信で内部ポートを直接使用
DATABASE_HOST=mamari-mysql  # Dockerホスト名
DATABASE_PORT=3306          # コンテナ内部ポート
DATABASE_USER=root  # 本番/ステージングでは専用ユーザーを使用（mamariq_receipt_reward等）
DATABASE_PASSWORD=your_password_here  # 実際のパスワードに置き換える
DATABASE_NAME=mamariq

# ========================================
# Redis設定
# ========================================
# 開発環境: local-mamari-redis コンテナ
# 本番/ステージング: ElastiCache
REDIS_HOST=local-mamari-redis
REDIS_PORT=6379
REDIS_PASSWORD=  # 本番/ステージングでは設定

# ========================================
# AWS設定（本番/ステージングのみ）
# ========================================
# 開発環境では不要（ECSタスクロールで自動取得）
AWS_REGION=ap-northeast-1
# AWS_ACCESS_KEY_ID=  # ECSタスクロールで自動取得
# AWS_SECRET_ACCESS_KEY=  # ECSタスクロールで自動取得

# ========================================
# Performance Media Network（WED/ONE）連携
# ========================================
# Secrets ManagerのシークレットID（環境別に設定）
PMN_SECRET_ID=reci-toku/dev/pmn-credentials  # dev: reci-toku/dev/pmn-credentials, prod: reci-toku/prod/pmn-credentials
# JWE暗号化鍵（本番/ステージング: Secrets Manager管理）
# 開発環境: 以下を設定（Secrets Managerから手動取得）
PMN_ENCRYPTION_KEY=  # Base64エンコードされた256bitキー
PMN_CLIENT_ID=  # WED社から発行されるクライアントID
PMN_SUBDOMAIN=mamari  # {subdomain}.perf.media（環境ごとに異なる場合あり）
PMN_WEBHOOK_SECRET=  # Webhook検証用（将来実装予定）

# ========================================
# ログ設定
# ========================================
LOG_LEVEL=debug  # debug, info, warn, error
LOG_FORMAT=json  # json, pretty

# ========================================
# Node環境
# ========================================
NODE_ENV=development  # development, staging, production

# ========================================
# セッション・認証（将来使用）
# ========================================
SESSION_SECRET=your_session_secret_here  # ランダムな文字列を生成
JWT_SECRET=your_jwt_secret_here  # ランダムな文字列を生成

# ========================================
# プッシュ通知（SQS/SNS）
# ========================================
# 開発環境ではモック使用
NOTIFICATION_QUEUE_URL=  # SQSキューURL（本番/ステージングで設定）
NOTIFICATION_ENABLED=false  # 開発環境ではfalse

# ========================================
# フロントエンド設定
# ========================================
# VITE_* はブラウザに公開されるため注意
VITE_API_URL=http://localhost:3001
VITE_ENV=development  # development, staging, production

# ========================================
# コイン有効期限設定
# ========================================
COIN_EXPIRE_DAYS=180  # デフォルト6ヶ月（DB設定で上書き可能）

# ========================================
# レート制限
# ========================================
RATE_LIMIT_MAX=100  # 1分あたりの最大リクエスト数
RATE_LIMIT_WINDOW_MS=60000  # ウィンドウ時間（ミリ秒）

# ========================================
# デバッグ設定
# ========================================
DEBUG=false  # trueにすると詳細ログ出力
MOCK_PMN_API=false  # trueにするとWED APIをモック化
